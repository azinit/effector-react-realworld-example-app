"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[593],{6763:function(e,t,r){r.d(t,{qn:function(){return g},fR:function(){return b},o4:function(){return n}});var n={};r.r(n),r.d(n,{createFeed:function(){return l}});var a=r(1549),i=r(3719),c=r(6942);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=e.effect,r=(0,a.yM)(),n=r.filter({fn:function(e){return!0===e.favorited}}),o=r.filter({fn:function(e){return!1===e.favorited}}),s=(0,a.GW)((function(e){var t=e.slug;return c.v_("articles/".concat(t,"/favorite")).then((function(e){return e.data}))})),l=(0,a.GW)((function(e){var t=e.slug;return c.IV("articles/".concat(t,"/favorite")).then((function(e){return e.data}))})),f=(0,a.MT)({articlesCount:0,articles:[]}).on(t.doneData,(function(e,t){return t})).on(n,(function(e,t){return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:u(u({},e),{},{favorited:!e.favorited,favoritesCount:e.favoritesCount-1})}))})})).on(o,(function(e,t){return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:u(u({},e),{},{favorited:!e.favorited,favoritesCount:e.favoritesCount+1})}))})})).on([s.done,l.done],(function(e,t){var r=t.params,n=t.result;return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==r.slug?e:u(u({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})).on([s.fail,l.fail],(function(e,t){var r=t.params;return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==r.slug?e:u(u({},e),{},{favorited:r.favorited,favoritesCount:r.favoritesCount})}))})})),d=f.map((function(e){return e.articlesCount})),v=f.map((function(e){return e.articles})),g=(0,i.status)({effect:t}),p=(0,a.$e)(g,v,(function(e,t){return("done"===e||"fail"===e)&&0===t.length}));return(0,a.Vl)({source:r,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:l,unfavorite:s}}),{favoriteArticleToggled:r,setUnfavoriteArticleFx:l,$feed:f,$totalPages:d,$articles:v,$isEmptyFeed:p}}var f=r(4246),d=function(e){var t=e.children;return(0,f.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},v=r(7459),g=function(e){var t=e.author,r=e.createdAt,n=e.children;return(0,f.jsxs)("div",{className:"article-meta",children:[(0,f.jsx)(v.rU,{to:"/@".concat(t.username),children:(0,f.jsx)("img",{alt:t.username,src:t.image})}),(0,f.jsxs)("div",{className:"info",children:[(0,f.jsx)(v.rU,{className:"author",to:"/@".concat(t.username),children:t.username}),(0,f.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})},p=r(9701),m=function(e){var t=e.active,r=e.onClick,n=e.children;return(0,f.jsxs)(p.zx,{className:"button-favorite btn-outline-primary","data-active":t,size:"sm",onClick:r,children:[(0,f.jsx)("i",{className:"ion-heart"})," ",n]})},h=function(e){var t=e.article,r=t.author,n=t.createdAt,a=t.slug,i=t.title,c=t.description,o=t.tagList,u=t.favorited,s=t.favoritesCount,l=e.onClick;return(0,f.jsxs)("article",{className:"article-preview",children:[(0,f.jsx)(g,{author:r,createdAt:n,children:(0,f.jsx)("div",{className:"pull-xs-right",children:(0,f.jsx)(m,{active:u,onClick:l,children:s})})}),(0,f.jsxs)(v.rU,{className:"preview-link",to:"/article/".concat(a),children:[(0,f.jsx)("h1",{children:i}),(0,f.jsx)("p",{children:c}),(0,f.jsx)("span",{children:"Read more..."}),(0,f.jsx)(p.PS,{children:o.map((function(e){return(0,f.jsx)(p.Vp,{children:e.toLowerCase()},e)}))})]})]})},j=function(e){return e.show?(0,f.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},x=r(9041),b=function(e){var t=e.loading,r=e.isEmpty,n=e.pageSize,a=e.pageNumber,i=e.totalPages,c=e.articles,o=e.onPageChange,u=e.onArticleClick;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j,{show:r}),(0,f.jsx)(d,{children:(0,x.sm)(c,{getKey:function(e){return e.slug},fn:function(e){return(0,f.jsx)("li",{children:(0,f.jsx)(h,{article:e,onClick:function(){return u(e)}})})}})}),(0,f.jsx)(p.tl,{current:a,pageSize:n,total:i,onPageChange:o}),(0,f.jsx)(p.$j,{show:t})]})}},3593:function(e,t,r){r.r(t),r.d(t,{default:function(){return R}});var n=r(7378),a=r(6763),i=r(1549),c=r(9041),o=r(6942),u=r(3300),s=r(9464),l=r(98),f=(0,i.GW)((function(e){var t=e.tag,r=e.pageSize,n=e.pageIndex;return o.U2("articles?tag=".concat(encodeURIComponent(t),"&").concat((0,u.b)(r,n))).then((function(e){return e.data}))})),d=a.o4.createFeed({effect:f}),v=d.favoriteArticleToggled,g=(d.$feed,d.$isEmptyFeed),p=d.$articles,m=d.$totalPages,h=(0,i.MT)(10),j=(0,s.L)(),x=j.queryParamsSetted,b=j.$pageIndex,y=j.$pageNumber,C=function(){return(0,c.oR)(f.pending)},P=function(){return(0,c.oR)(g)},w=function(){return(0,c.oR)(m)},O=function(){return(0,c.oR)(h)},N=function(){return(0,c.oR)(y)},$=function(){return(0,c.oR)(b)},k=function(){return(0,c.oR)(l.o.$currentTag)},S=r(4246),R=function(){var e=C(),t=P(),r=k(),i=O(),c=$(),o=N(),u=w();return(0,n.useEffect)((function(){f({tag:r,pageSize:i,pageIndex:c})}),[r,i,c]),(0,S.jsx)(a.fR,{articles:p,isEmpty:t,loading:e,pageNumber:o,pageSize:i,totalPages:u,onArticleClick:v,onPageChange:function(e){x(e),f({tag:r,pageSize:i,pageIndex:c})}})}},3300:function(e,t,r){r.d(t,{b:function(){return n}});var n=function(e,t){return"limit=".concat(e,"&offset=").concat(t*e)}},9464:function(e,t,r){r.d(t,{L:function(){return i}});var n=r(1549),a=r(8737);function i(){var e=(0,n.yM)(),t=(0,n.nu)(e.map(String),"1"),r=t.map(Number);(0,a.tJ)({store:t,key:"page"});var i=r.map((function(e){return e-1}));return{queryParamsSetted:e,$pageNumber:r,$pageIndex:i}}}}]);