"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[851],{1851:function(e,r,t){t.r(r),t.d(r,{default:function(){return V}});var n=t(6455),a=t(4246),i=function(e){var r=e.tag,t=e.onTagClick,i=e.children;return(0,a.jsxs)("span",{className:"tag-default tag-pill",children:[i,(0,a.jsx)(n.zx,{className:"editor-tag",size:"sm",onClick:function(){return t(r)},children:(0,a.jsx)("i",{className:"ion-close-round"})})]})},c=t(7378),o=t(8039),u=t(9635),s=t(9041),l=t(1549),f=t(9721),d=t(6942);function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){h(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function h(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function g(e,r,t,n,a,i,c){try{var o=e[i](c),u=o.value}catch(e){return void t(e)}o.done?r(u):Promise.resolve(u).then(n,a)}function v(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function c(e){g(i,n,a,c,o,"next",e)}function o(e){g(i,n,a,c,o,"throw",e)}c(void 0)}))}}var j=function(){var e=v(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.v_("articles",{article:r});case 2:return t=e.sent,n=t.data,e.abrupt("return",n.article);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=v(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.U2("articles/".concat(r));case 2:return t=e.sent,n=t.data,e.abrupt("return",n.article);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),O=function(){var e=v(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.gz("/articles/".concat(r.slug),{article:b(b({},r),{},{slug:void 0})});case 2:return t=e.sent,n=t.data,e.abrupt("return",n.article);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),y=((0,l.yM)(),(0,l.yM)(),(0,l.GW)(j)),x=(0,l.GW)(m),w=(0,l.GW)(O),P=(0,l.GW)((function(e){var r=e.slug;f.m8.replace("/article/".concat(r))}));(0,l.eH)({from:[w.doneData,y.doneData],to:P});var D=(0,s.Bq)(),k=(0,l.MT)({errors:{}}).on(y.failData,(function(e,r){var t;return null===(t=r.response)||void 0===t?void 0:t.data})).reset(D.close),S=k.map((function(e){return Object.keys(Object(e)).length>0})),R=k.map((function(e){return Object.entries(Object(null==e?void 0:e.errors))})),C=function(){return(0,s.oR)(y.pending)},T=function(){return(0,s.oR)(S)},G=function(){return(0,s.oR)(R)},z=function(){var e=function(){var e=(0,o.Gc)(),r=e.setValue,t=e.watch,n=(0,c.useRef)(null),a=t("tagList"),i=function(e){var t,i,c=null===(t=n.current)||void 0===t?void 0:t.value;"Enter"===e.key&&c&&(r("tagList",(i=a.concat(c),Array.from(new Set(i)))),n.current.value="")},u=function(e){e.preventDefault()},s=(0,c.useCallback)((function(e){r("tagList",a.filter((function(r){return r!==e})))}),[r,a]);return{ref:n,tags:a,handleAddTag:i,handleSubmit:u,handleDeleteTag:s}}(),r=e.handleSubmit,t=e.ref,u=e.tags,s=e.handleAddTag,l=e.handleDeleteTag;return(0,a.jsxs)(n.l0,{onSubmit:r,children:[(0,a.jsx)(n.l0.Control,{ref:t,onKeyDown:s}),(0,a.jsx)(n.aV,{children:u.map((function(e){return(0,a.jsx)(i,{tag:e,onTagClick:l,children:e},e)}))})]})};var E=(0,c.memo)((function(){var e=C();return(0,a.jsx)(n.zx,{className:"btn-primary pull-xs-right",disabled:e,form:"editor",size:"lg",type:"submit",children:"Publish article"})}));function W(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?W(Object(t),!0).forEach((function(r){A(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function A(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var L=function(){var e=function(){(0,s.DD)(D);var e=(0,u.UO)().slug,r=(0,o.cI)({defaultValues:{slug:"",title:"",description:"",body:"",tagList:[]}}),t=r.handleSubmit,n=r.register,a=r.reset;return(0,c.useEffect)((function(){e&&x(e);var r=x.doneData.watch((function(e){a(e)}));return function(){return r()}}),[e,a]),{handleSubmit:t((function(r){e?w(N(N({},r),{},{slug:e})):y(r)})),methods:r,register:n}}(),r=e.methods,t=e.handleSubmit,i=e.register;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.RV,N(N({},r),{},{children:[(0,a.jsxs)(n.l0,{id:"editor",onSubmit:t,children:[(0,a.jsx)(n.l0.Group,{children:(0,a.jsx)(n.l0.Control,N({placeholder:"Article Title",size:"lg"},i("title")))}),(0,a.jsx)(n.l0.Group,{children:(0,a.jsx)(n.l0.Control,N({placeholder:"What's this article about?"},i("description")))}),(0,a.jsx)(n.l0.Group,{children:(0,a.jsx)(n.l0.Control,N({as:"textarea",placeholder:"Write your article (in markdown)",rows:8},i("body")))})]}),(0,a.jsx)(z,{})]})),(0,a.jsx)(E,{})]})};var M=function(){var e=T(),r=G();return e?(0,a.jsx)(n.KM,{errors:r}):null},V=function(){return(0,a.jsx)(n.T3,{children:(0,a.jsx)(n.X2,{children:(0,a.jsxs)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:[(0,a.jsx)(M,{}),(0,a.jsx)(L,{})]})})})}}}]);