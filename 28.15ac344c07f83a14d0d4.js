"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[28],{8012:function(e,t,r){r.d(t,{qn:function(){return y},fR:function(){return P},fD:function(){return d}});var n=r(1549),a=r(3719),i=r(6942);function o(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function u(e){o(i,n,a,u,c,"next",e)}function c(e){o(i,n,a,u,c,"throw",e)}u(void 0)}))}}var c=function(){var e=u(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.next=3,i.v_("articles/".concat(r,"/favorite"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=u(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.next=3,i.IV("articles/".concat(r,"/favorite"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=e.effect,r=(0,n.yM)(),i=r.filter({fn:function(e){return!0===e.favorited}}),o=r.filter({fn:function(e){return!1===e.favorited}}),u=(0,n.GW)(c),l=(0,n.GW)(s),v=(0,n.MT)({articlesCount:0,articles:[]}).on(t.doneData,(function(e,t){return t})).on(i,(function(e,t){return f(f({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:f(f({},e),{},{favorited:!e.favorited,favoritesCount:e.favoritesCount-1})}))})})).on(o,(function(e,t){return f(f({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:f(f({},e),{},{favorited:!e.favorited,favoritesCount:e.favoritesCount+1})}))})})).on([u.done,l.done],(function(e,t){var r=t.params,n=t.result;return f(f({},e),{},{articles:e.articles.map((function(e){return e.slug!==r.slug?e:f(f({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})).on([u.fail,l.fail],(function(e,t){var r=t.params;return f(f({},e),{},{articles:e.articles.map((function(e){return e.slug!==r.slug?e:f(f({},e),{},{favorited:r.favorited,favoritesCount:r.favoritesCount})}))})})),d=v.map((function(e){return e.articlesCount})),p=v.map((function(e){return e.articles})),g=(0,a.status)({effect:t}),m=(0,n.$e)(g,p,(function(e,t){return("done"===e||"fail"===e)&&0===t.length}));return(0,n.Vl)({source:r,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:l,unfavorite:u}}),{favoriteArticleToggled:r,setUnfavoriteArticleFx:l,$feed:v,$totalPages:d,$articles:p,$isEmptyFeed:m}}var p=r(4246),g=function(e){var t=e.children;return(0,p.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},m=r(7378),h=r(4289),y=(0,m.memo)((function(e){var t=e.author,r=e.createdAt,n=e.children;return(0,p.jsxs)("div",{className:"article-meta",children:[(0,p.jsx)(h.rU,{to:"/@".concat(t.username),children:(0,p.jsx)("img",{alt:t.username,src:t.image})}),(0,p.jsxs)("div",{className:"info",children:[(0,p.jsx)(h.rU,{className:"author",to:"/@".concat(t.username),children:t.username}),(0,p.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})}));y.displayName="ArticleMeta";var j=r(9261),x=function(e){var t=e.slug,r=e.favorited,n=e.favoritesCount,a=e.onClick,i=e.children;return(0,p.jsxs)(j.zx,{className:"button-favorite btn-outline-primary","data-active":r,size:"sm",onClick:function(){a({slug:t,favorited:r,favoritesCount:n})},children:[(0,p.jsx)("i",{className:"ion-heart"})," ",i]})},b=(0,m.memo)((function(e){var t=e.author,r=e.createdAt,n=e.slug,a=e.title,i=e.description,o=e.tagList,u=e.favorited,c=e.favoritesCount,s=e.onFavoriteToggle;return(0,p.jsxs)("article",{className:"article-preview",children:[(0,p.jsx)(y,{author:t,createdAt:r,children:(0,p.jsx)("div",{className:"pull-xs-right",children:(0,p.jsx)(x,{favorited:u,favoritesCount:c,slug:n,onClick:s,children:c})})}),(0,p.jsxs)(h.rU,{className:"preview-link",to:"/article/".concat(n),children:[(0,p.jsx)("h1",{children:a}),(0,p.jsx)("p",{children:i}),(0,p.jsx)("span",{children:"Read more..."}),(0,p.jsx)(j.oS,{children:o.map((function(e){return(0,p.jsx)(j.Vp,{children:e.toLowerCase()},e)}))})]})]})}));b.displayName="Article Preview";var w=function(e){return e.show?(0,p.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},C=r(9041),P=function(e){var t=e.loading,r=e.isEmpty,n=e.articlesStore,a=e.onFavoriteToggle;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(w,{show:r}),(0,p.jsx)(g,{children:(0,C.sm)(n,{getKey:function(e){return e.slug},fn:function(e){return(0,p.jsx)("li",{children:(0,p.jsx)(b,{author:e.author,createdAt:e.createdAt,description:e.description,favorited:e.favorited,favoritesCount:e.favoritesCount,slug:e.slug,tagList:e.tagList,title:e.title,onFavoriteToggle:a})})}})}),(0,p.jsx)(j.$j,{show:t})]})}},7028:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(7378),a=r(8012),i=r(9261),o=r(335),u=r(3828),c=r(1549),s=r(9041),l=r(6942),f=r(3300);function v(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}var d=(0,c.GW)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n,a,i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.page,a=t.pageSize,i=n-1,e.next=4,l.U2("articles?favorited=".concat(encodeURIComponent(r),"&").concat((0,f.b)(a,i)));case 4:return o=e.sent,u=o.data,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){v(i,n,a,o,u,"next",e)}function u(e){v(i,n,a,o,u,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()),p=a.fD({effect:d}),g=p.favoriteArticleToggled,m=(p.$feed,p.$isEmptyFeed),h=p.$articles,y=p.$totalPages,j=p.setUnfavoriteArticleFx,x=function(){return(0,s.oR)(m)},b=function(){return(0,s.oR)(d.pending)},w=function(){return(0,s.oR)(y)},C=r(4246);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.pageSize,r=void 0===t?5:t,c=function(e){var t=P((0,o.Wd)("page",(0,o.Wc)(o.yz,1)),2),r=t[0],a=t[1],i=u.wl.useUserName(),c=b(),s=x(),l=w();return(0,n.useEffect)((function(){d({username:i,page:r,pageSize:e})}),[i,r,e]),{page:r,loading:c,isEmpty:s,totalPages:l,handlePageChange:function(e){a(e)},handleFavoriteToggle:function(t){g(t),j.done.watch((function(){d({username:i,page:r,pageSize:e})}))}}}(r);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(a.fR,{articlesStore:h,isEmpty:c.isEmpty,loading:c.loading,onFavoriteToggle:c.handleFavoriteToggle}),(0,C.jsx)(i.tl,{current:c.page,pageSize:r,total:c.totalPages,onPageChange:c.handlePageChange})]})}},3300:function(e,t,r){r.d(t,{b:function(){return n}});var n=function(e,t){return"limit=".concat(e,"&offset=").concat(t*e)}}}]);